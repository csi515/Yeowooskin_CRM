# 빌드 오류 방지 코드 리뷰 체크리스트

## TypeScript 타입 안전성

### 필수 확인사항
- [ ] 모든 함수 파라미터에 타입 정의가 있는가?
- [ ] 모든 변수 선언에 타입이 명시되어 있는가?
- [ ] `any` 타입을 사용하지 않았는가? (특별한 경우 제외)
- [ ] `unknown` 타입을 사용하여 안전한 타입 가드를 구현했는가?
- [ ] `as` 타입 단언을 최소화했는가?

### API 관련
- [ ] API 응답 타입이 정의되어 있는가?
- [ ] API 요청 바디 타입이 Zod 스키마로 검증되는가?
- [ ] 에러 응답 타입이 일관되게 정의되어 있는가?

## Next.js 컴포넌트 분리

### 서버/클라이언트 컴포넌트
- [ ] 모든 페이지 컴포넌트에 `'use client'`가 적절히 적용되어 있는가?
- [ ] 서버 컴포넌트에서 클라이언트 전용 API를 사용하지 않았는가?
  - `window`, `document`, `localStorage` 등
- [ ] 클라이언트 컴포넌트에서 서버 전용 모듈을 import하지 않았는가?

### 동적 Import
- [ ] `lazy()`로 동적 import하는 컴포넌트들의 경로가 올바른가?
- [ ] 동적 import 경로가 상대 경로로 정확히 지정되어 있는가?

## 환경 변수

### 접근 방식
- [ ] 모든 환경 변수 접근이 `process.env.KEY` 형식을 사용하는가?
- [ ] `process.env['KEY']` 형식을 사용하지 않았는가?
- [ ] `NEXT_PUBLIC_` 접두사가 필요한 변수에만 적용되어 있는가?

### 검증
- [ ] 환경 변수 검증 로직이 올바르게 구현되어 있는가?
- [ ] 필수 환경 변수가 누락되지 않았는가?

## Import 및 모듈

### 경로 일관성
- [ ] 모든 import가 `@/` 별칭을 사용하는가?
- [ ] 상대 경로와 절대 경로가 혼용되지 않았는가?
- [ ] 순환 참조(circular dependency)가 없는가?

### 모듈 구조
- [ ] 각 파일이 하나의 주요 책임을 가지는가?
- [ ] 파일 크기가 500줄을 넘지 않는가?

## 에러 처리

### 표준화
- [ ] 모든 API 라우트에서 일관된 에러 응답 형식을 사용하는가?
- [ ] `withHQ` 래퍼를 사용하는 API 라우트에서 에러 처리가 적절한가?
- [ ] 클라이언트에서 `useFetchData` 훅을 사용하여 에러 처리를 통일했는가?

### 로깅
- [ ] 에러가 적절히 로깅되는가?
- [ ] 프로덕션 환경에서 민감한 정보가 노출되지 않는가?

## React Hooks

### 의존성 배열
- [ ] 모든 `useEffect`, `useCallback`, `useMemo`의 의존성 배열이 올바른가?
- [ ] 불필요한 의존성이 포함되지 않았는가?
- [ ] 필요한 의존성이 누락되지 않았는가?

### 사용 규칙
- [ ] 조건부 hook 사용을 피했는가?
- [ ] hooks이 최상위 레벨에서만 호출되는가?

## 빌드 최적화

### 번들 크기
- [ ] 큰 라이브러리가 적절히 코드 분할되어 있는가?
- [ ] 동적 import가 성능 향상에 사용되는가?

### 캐싱
- [ ] 정적 자원의 캐싱 설정이 올바른가?
- [ ] API 응답의 캐싱 전략이 적절한가?

## 보안

### 데이터 검증
- [ ] 모든 사용자 입력이 검증되는가?
- [ ] SQL 인젝션 방지를 위한 파라미터화 쿼리를 사용하는가?

### 인증/인가
- [ ] 민감한 라우트에 적절한 권한 검사가 적용되어 있는가?
- [ ] JWT 토큰이 안전하게 처리되는가?

## 접근성

### ARIA 속성
- [ ] 모든 인터랙티브 요소에 적절한 ARIA 레이블이 있는가?
- [ ] 키보드 네비게이션이 가능한가?

### 시맨틱 HTML
- [ ] 적절한 HTML 시맨틱 요소를 사용하는가?
- [ ] heading 계층이 올바른가?

## 성능

### 렌더링 최적화
- [ ] 불필요한 리렌더링을 방지하는가?
- [ ] `React.memo`, `useMemo`, `useCallback`을 적절히 사용하는가?

### 데이터 페칭
- [ ] API 호출이 효율적인가?
- [ ] 불필요한 데이터 페칭을 방지하는가?

## 테스트

### 커버리지
- [ ] 주요 기능에 대한 테스트가 작성되어 있는가?
- [ ] 에러 케이스가 테스트되는가?

### 실행
- [ ] 모든 테스트가 통과하는가?
- [ ] 빌드 시 테스트가 실행되는가?

## 문서화

### 코드 주석
- [ ] 복잡한 로직에 주석이 달려 있는가?
- [ ] 함수의 목적과 파라미터가 문서화되어 있는가?

### API 문서
- [ ] API 엔드포인트가 문서화되어 있는가?
- [ ] 요청/응답 형식이 명시되어 있는가?

## 배포 준비

### 환경 설정
- [ ] 모든 환경별 설정이 올바른가?
- [ ] 프로덕션 환경에서 디버그 코드가 제거되었는가?

### 모니터링
- [ ] 에러 추적 시스템이 설정되어 있는가?
- [ ] 성능 모니터링이 구현되어 있는가?

---

## 체크리스트 사용법

1. **코드 작성 시**: 각 항목을 확인하며 코드 작성
2. **코드 리뷰 시**: 리뷰어가 이 체크리스트를 사용하여 검토
3. **빌드 실패 시**: 실패 원인을 이 체크리스트와 대조하여 수정

## 자동화된 검사

이 체크리스트의 많은 항목들이 다음 도구를 통해 자동화될 수 있습니다:

- **ESLint**: 코드 품질 및 스타일 검사
- **TypeScript**: 타입 안전성 검사
- **Pre-commit hooks**: 커밋 전 자동 검사
- **CI/CD 파이프라인**: 빌드 시 자동 검증

자동화된 검사를 우선 활용하고, 이 체크리스트를 보조적으로 사용하세요.
